<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible"
        content="IE=edge">
    <title>AdminLTE 3 | User Profile</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<style>
    .textover {
        display: block;
        display: -webkit-box;
        line-height: 1;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
        margin: 0 auto;
        line-height: normal;
    }

    .mysearch {
        position: absolute;
        background-color: white !important;
        width: 100%;
        overflow: auto;
        z-index: 1;
        padding: 0 !important;
        margin: 0 !important;

    }

    .mysearch a {
        background-color: white !important;
        color: black;
        padding: 15px 5px 15px 5px;
        text-decoration: none;
        display: block;
        margin: none;
        /* border-bottom:2px solid gray;
      border-left:2px solid gray;
      border-right:2px solid gray */

    }

    .myimg {
        max-width: 70px;
        border-radius: 5px;
    }

    .mysearch a:hover {
        /* background-color: #343A40;
      color:white; */
        filter: brightness(90%);
        cursor: pointer;

    }

    .my-p {
        text-align: center;
        cursor: pointer;
        border-top: 1px solid gray;
        border-bottom: 1px solid gray;
    }

    #myInput {
        box-sizing: border-box;
        background-repeat: no-repeat;
        width: 100%;
        font-size: 16px;
        margin: none;
        padding: 5px;
        padding-left: 35px;
        border-bottom-left-radius: none !important;
        border-bottom-right-radius: none !important;
    }

    .my-tab {
        padding: 5px;
    }

    #tab_item {
        margin: 10px;
        padding: 5px;
    }

    #tab_item:hover {
        filter: brightness(90%);
        cursor: pointer;
    }

    .mycard:hover {
        cursor: pointer;
        filter: brightness(90%);
    }

    /* toast */
    .my-toast {
        margin: 10px 20px 5px 10px;
        padding: 20px;
        min-width: 250px;
        max-width: 250px;
        max-height: 150px;
    }

    .my-toast-wrapper {
        overflow: auto;
        position: absolute;
        top: 0;
        right: 0;
        z-index: 2;
    }

    .my-toast-wrapper:hover {
        cursor: pointer;

    }

    .my-toast:hover {
        filter: brightness(90%);
    }

    td.mytd {
        vertical-align: middle;
        text-align: center;
    }

    .orderinput::-webkit-outer-spin-button,
    .orderinput::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    .orderinputsmall::-webkit-outer-spin-button,
    .orderinputsmall::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    .userinput::-webkit-outer-spin-button,
    .userinput::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    .userinput {
        border-radius: 0;
        border: none;
        border-bottom: 1px solid lightgray;
        font-size: 16px;
    }

    .userinput:focus {
        border-bottom: 1px solid green;
    }

    .orderinput {
        border-radius: 0;
        border: none;
        border-bottom: 1px solid lightgray;
        font-size: 24px;
    }

    .orderinputsmall {
        border-radius: 0;
        border: none;
        width: 100%;
        padding: 0px;
        border-bottom: 1px solid lightgray;
        font-size: 15px;
    }

    .orderinput:focus {
        border-bottom: 1px solid green;
    }

    .userinput:focus {
        border-bottom: 1px solid green;
    }

    input:read-only {
        background-color: white;
    }
</style>

<body class="hold-transition sidebar-mini">

    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link"
                        data-widget="pushmenu"
                        href="#"
                        role="button"><i class="fas fa-bars"></i></a>
                </li>

            </ul>
            <!-- mytoast -->
            <ul class="my-toast-wrapper">
                <li class="card my-toast"
                    [ngClass]="toast_type(e.type)"
                    [ngStyle]="toast_color(e.type)"
                    *ngFor="let e of err"
                    (click)="dismiss_err(e)">
                    <div class="row">
                        <div *ngIf="e.type === 'danger' "><i class="fas fa-exclamation-circle"></i></div>
                        <div *ngIf="e.type === 'success' "><i class="fas fa-check-circle"></i></div>
                        <div *ngIf="e.type === 'warning' "><i class="fas fa-exclamation-triangle"></i></div>
                        <div *ngIf="e.type === 'info' "><i class="fas fa-info-circle"></i></div>
                        <div class="col">
                            <div *ngIf="err.length !== 0">{{e.message}}</div>
                        </div>
                    </div>
                </li>

            </ul>
            <div class="container-fluid">
                <div class="col-sm-6">
                    <div class="col-sm-12">
                        <div class="input-group">
                            <div class="input-group-append">

                                <span *ngIf="searchTerm === undefined"><button class="btn"
                                        style="color:gray"><i class="fas fa-search"></i></button></span>
                                <span *ngIf="searchTerm !== undefined || searchTerm === ' ' ">
                                    <button class="btn"
                                        style="color:gray"
                                        (click)="input_close()">
                                        <span *ngIf="searchTerm !== ''"><i class="fas fa-times"></i></span>
                                        <span *ngIf="searchTerm === ''"><i class="fas fa-search"></i></span>
                                    </button>
                                </span>
                                <div class="mysearch"
                                    [ngClass]="input_focus()">
                                    <input id="myInput"
                                        placeholder="Find product..."
                                        [(ngModel)]="searchTerm"
                                        (ngModelChange)="search()"
                                        (focus)="input_focus()"
                                        (blur)="input_blur()">
                                    <div class="my-result">
                                        <a *ngFor="let item of PSET_ARR.slice(0,3); let x = index"
                                            (click)="find_product(item)">
                                            <div class="container mycon">
                                                <div class="row">
                                                    <div class="col">
                                                        <img class="myimg"
                                                            src="https://picsum.photos/200">
                                                    </div>
                                                    <div class="col">
                                                        <b>{{item.product_name}} </b>
                                                        <div>#{{item.product_id}}</div>
                                                    </div>
                                                    <div class="col">
                                                        <table>
                                                            <tr>
                                                                <td>In stock:</td>
                                                                <td>{{item.product_stock}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Bought:</td>
                                                                <td>{{item.product_bought}}</td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>

                                            </div>
                                        </a>
                                        <p class="my-p"
                                            *ngIf="PSET_ARR.length>3">
                                            <b>There are {{PSET_ARR.length - 3}} more results matches...</b>
                                        </p>

                                        <a
                                            *ngIf="PSET_ARR.length === 0 && searchTerm !== undefined && searchTerm !== ''">
                                            <div class="container mycon">
                                                <div class="row">
                                                    <div class="col">
                                                        <p style="text-align: center;"> <b> 0 result matches
                                                            </b></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="input-group col-sm-12">
                        <button class="btn btn-light"
                            type="button"
                            id="dropdownMenuButton"
                            data-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false">
                            Employee
                        </button>
                        <div class="dropdown-menu text-center"
                            style="position: absolute;"
                            aria-labelledby="dropdownMenuButton"
                            *ngFor="let i of infoarr">
                            <div class="dropdown-item text-left">
                                <i class="fas fa-user"></i>
                                {{i.admin_name}}
                            </div>
                            <div class="dropdown-item text-left">
                                <i class="fas fa-at"></i>
                                {{i.admin_email}}
                            </div>
                            <div class="dropdown-item text-left">
                                <i class="fas fa-user-shield"></i>
                                {{i.admin_role}}
                            </div>
                            <div class="dropdown-item text-center"><button class="btn btn-danger mt-1 mb-1"
                                    (click)="clickLogout()"><a
                                        style=" text-align: center; align-items: center;">Logout</a>
                                </button>
                            </div>
                        </div>
                        <select class="custom-select"
                            [(ngModel)]="branchModel">
                            <option *ngFor='let b of allbranch'
                                [ngValue]='b'>{{b.branch_name}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-4">

                </div>
            </div>
            <!-- Right navbar links -->

        </nav>
        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a class="brand-link">
                <img src="assets/dist/img/AdminLTELogo.png"
                    alt="AdminLTE Logo"
                    class="brand-image img-circle elevation-3"
                    style="opacity: .8">
                <span class="brand-text font-weight-light">Admin</span>
            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar user (optional) -->
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="image">
                        <img src="assets/dist/img/maleava.png"
                            class="img-circle elevation-2"
                            alt="User Image">
                    </div>
                    <div class="info">
                        <a *ngFor="let i of infoarr"
                            class="d-block">{{i.admin_name}}</a>
                    </div>
                </div>

                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column"
                        data-widget="treeview"
                        role="menu"
                        data-accordion="false">

                        <li class="nav-item active">
                            <a href="/sale-page"
                                class="nav-link">
                                <i class="fas fa-shopping-cart m-1 mr-2"></i>
                                <p> Sale</p>
                            </a>
                        </li>

                        <li class="nav-item has-treeview menu-open">
                            <a href="/profile-page"
                                class="nav-link">
                                <i class="nav-icon fas fa-book"></i>
                                <p>
                                    Order
                                    <i class="fas fa-angle-left right"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">

                                <li class="nav-item">
                                    <a href="/profile-page"
                                        class="nav-link ">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Order list</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/sale-page"
                                        class="nav-link active">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Sale</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/invoice-page"
                                        class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Invoice</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-treeview">
                            <a class="nav-link">
                                <i class="nav-icon fas fa-book"></i>
                                <p>
                                    User
                                    <i class="fas fa-angle-left right"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">

                                <li class="nav-item">
                                    <a href="/user-page"
                                        class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>User list</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-treeview">
                            <a class="nav-link">
                                <i class="nav-icon fas fa-book"></i>
                                <p>
                                    Product
                                    <i class="fas fa-angle-left right"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">

                                <li class="nav-item">
                                    <a href="/product-page"
                                        class="nav-link ">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Product list</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/purchase-order"
                                        class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Nhap hang</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-treeview">
                            <a class="nav-link">
                                <i class="nav-icon far fa-plus-square"></i>
                                <p>
                                    Authentication
                                    <i class="fas fa-angle-left right"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="/login-page"
                                        class="nav-link">
                                        <i class="far fa-circle nav-icon"></i>
                                        <p>Login</p>
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <li class="nav-header">LABELS</li>
                        <li class="nav-item">
                            <a class="nav-link">
                                <i class="nav-icon far fa-circle text-danger"></i>
                                <p class="text">Important</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/profile-page"
                                class="nav-link">
                                <i class="nav-icon far fa-circle text-warning"></i>
                                <p>Warning</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/profile-page"
                                class="nav-link">
                                <i class="nav-icon far fa-circle text-info"></i>
                                <p>Informational</p>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content *ngIf="searchinput.value !== '' " -->
        <div class="content-wrapper">

            <div class="modal fade bd-example-modal-lg"
                tabindex="-1"
                role="dialog"
                aria-labelledby="myLargeModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header bg-dark">
                            <div class="btn btn-dark">
                                Add customer
                            </div>

                        </div>
                        <div class="modal-body">
                            <table class="table table-borderless">
                                <tbody>
                                    <tr>
                                        <td colspan="4">
                                            <h1>Main info</h1>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><button class="btn btn-white"><b>Username:</b> </button> </td>
                                        <td><input class="form-control userinput"
                                                placeholder="Username..."
                                                #name></td>
                                        <td><b>User ID: </b> </td>
                                        <td><input class="form-control userinput"
                                                placeholder="Hash id..."
                                                #id></td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <h1>Additional info</h1>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><button class="btn btn-white"><b>Telephone: </b></button> </td>
                                        <td><input class="form-control userinput"
                                                placeholder="Telephone..."
                                                #telephone></td>
                                        <td><button class="btn btn-white"><b>Address: </b></button> </td>
                                        <td><input class="form-control userinput"
                                                placeholder="Address..."
                                                #address></td>
                                    </tr>
                                    <tr>
                                        <td><button class="btn btn-white"><b>Email: </b> </button></td>
                                        <td><input class="form-control userinput"
                                                placeholder="Email..."
                                                #email></td>
                                        <td><button class="btn btn-white"><b>Role: </b></button> </td>
                                        <td><input class="form-control userinput"
                                                placeholder="Role..."
                                                #role></td>
                                    </tr>
                                    <tr>
                                        <td><button class="btn btn-white"><b>DOB: </b> </button></td>
                                        <td><input class="form-control userinput"
                                                placeholder="Birthday..."
                                                #dob></td>
                                        <td><button class="btn btn-white"><b>Gender: </b></button> </td>
                                        <td><input class="form-control userinput"
                                                placeholder="Gender..."
                                                #gender></td>
                                    </tr>
                                    <tr>
                                        <td><button class="btn btn-white"><b>Extra info</b></button></td>
                                        <td colspan="3">
                                            <textarea class="form-control"
                                                placeholder="More info..."
                                                #info
                                                rows="3"></textarea>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button"
                                class="btn btn-secondary"
                                data-dismiss="modal">Close</button>
                            <button type="button"
                                class="btn btn-success"
                                (click)="addNewOrderUser(name.value,id.value,telephone.value,address.value,email.value,role.value,dob.value,gender.value,info.value)">
                                Save
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <section class="content">
                <div class="container-fluid ">
                    <div class="row">
                        <div class="col-sm-9 p-0 m-0">
                            <!-- Profile Image -->
                            <div class="card bg-white m-1 p-0 overflow-auto h-50"
                                style="max-height: 500px;min-height: 500px;">
                                <!-- /.card-header -->
                                <nav class="bg-light">
                                    <div class="nav nav-pills d-flex flex-row"
                                        id="nav-tab"
                                        role="tablist">
                                        <a class=" nav-item nav-link mynav"
                                            [ngClass]="{active: t === i}"
                                            [attr.id]=" 'navhometab'+x"
                                            data-toggle="tab"
                                            [attr.href]="'#nav-home'+ i"
                                            role="tab"
                                            [attr.aria-controls]="'nav-home'"
                                            aria-selected="true"
                                            *ngFor="let i of temporder; let x= index"
                                            (click)="test(i)">
                                            Order {{i}} <i class="fas fa-times"
                                                (click)="removeTab(x);removeAll(i)"></i>
                                        </a>
                                        <a class="nav-item nav-link "
                                            (click)="addTab()"
                                            data-toggle="tab"
                                            [attr.href]="'#nav-home'+ t"
                                            style="color:gray;background-color: #F8F9FA;">
                                            <i class="fas fa-plus"></i>
                                        </a>
                                    </div>
                                </nav>
                                <div class="tab-content my-tab"
                                    id="nav-tabContent">
                                    <div class="tab-pane fade show "
                                        [attr.id]="'nav-home'+t"
                                        role="tabpanel"
                                        aria-labelledby="navhometab"
                                        [(ngModel)]="t"
                                        name="fieldName"
                                        ngDefaultControl>
                                        <div class="my-tab-pane"
                                            *ngFor="let item of TAB_ARR">
                                            <div *ngIf="item.tab_id === t">
                                                <div *ngFor="let pro of item.tab_product">
                                                    <div id="tab_item"
                                                        class="card d-flex flex-row bg-white rounded p-0 m-0 border">
                                                        <table class="table table-sm m-0 p-0">
                                                            <tr class="p-0 m-0 d-flex">
                                                                <td class="col-1 mytd">
                                                                    <img class="myimg border"
                                                                        style="max-width: 70px;max-height: 70px;"
                                                                        src="https://picsum.photos/200">
                                                                </td>
                                                                <td class="col-1 mytd"
                                                                    rowspan="2">
                                                                    <button type="button"
                                                                        class="btn btn-light"
                                                                        (click)=" remove_tabproduct(item,pro)">
                                                                        <i class="fas fa-trash-alt"></i>
                                                                    </button>
                                                                </td>
                                                                <td class="col-4 mytd">
                                                                    <table class="table-borderless m-0 p-0">
                                                                        <tr>
                                                                            <td>
                                                                                <small>Id</small>
                                                                                <h5>{{pro.product_hash_id}}</h5>
                                                                            </td>
                                                                            <td></td>
                                                                            <td>
                                                                                <small>Name</small>
                                                                                <h3><span *ngFor="let pr of allproduct">
                                                                                        <span
                                                                                            *ngIf="pr.product_hash_id === pro.product_hash_id">{{pr?.product_name}}</span>
                                                                                    </span></h3>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </td>
                                                                <td class="col-2 mytd">
                                                                    <table class="table-borderless">
                                                                        <tr>
                                                                            <td>
                                                                                <button type="button"
                                                                                    class="btn btn-light"
                                                                                    (click)=" ADD_AND_MINUS('minus',item,pro)">
                                                                                    <i class="fas fa-angle-down"></i>
                                                                                </button>
                                                                            </td>
                                                                            <td>
                                                                                <small>Quantity:</small>
                                                                                <h1>{{pro.product_quantity}}
                                                                                </h1>
                                                                            </td>
                                                                            <td>
                                                                                <button type="button"
                                                                                    class="btn btn-light"
                                                                                    (click)=" ADD_AND_MINUS('add',item,pro)">
                                                                                    <i class="fas fa-angle-up"></i>
                                                                                </button>

                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </td>
                                                                <td class="col-2 mytd"
                                                                    rowspan="2">
                                                                    <span *ngFor="let pr of allproduct">
                                                                        <span
                                                                            *ngIf="pr.product_hash_id === pro.product_hash_id">
                                                                            <small>Price</small>
                                                                            <h1>${{pr?.product_price}}</h1>
                                                                        </span>
                                                                    </span>
                                                                </td>
                                                                <td class="col-2 mytd"
                                                                    rowspan="2">
                                                                    <span *ngFor="let pr of allproduct">
                                                                        <span
                                                                            *ngIf="pr.product_hash_id === pro.product_hash_id">
                                                                            <small>Total</small>
                                                                            <h1>${{pro.product_quantity * pr?.product_price}}
                                                                            </h1>

                                                                        </span>
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- /.card-body -->
                            </div>
                            <div class="card bg-white m-1 p-0 overflow-auto h-50"
                                style="max-height: 500px;min-height: 500px;">
                                <div class="card-header bg-light p-0">
                                    <div class="row m-0">
                                        <div class="col"
                                            style="text-align: left;">
                                            <button class="btn btn-light border"
                                                (click)="changeProSize()">
                                                <span *ngIf="proSize === true"> <i class="fas fa-th-large"></i> </span>
                                                <span *ngIf="proSize !== true"> <i class="fas fa-th"></i></span>
                                            </button>
                                            <button class="btn btn-light border"
                                                (click)="changeImgSize()">
                                                <span *ngIf="imgSize === true"> <i class="fas fa-image"></i> </span>
                                                <span *ngIf="imgSize !== true"><i class="fas fa-eye-slash"></i></span>
                                            </button>
                                            <button class="btn btn-light border"
                                                (click)="changeArrSize()">
                                                <span *ngIf="productArraySize === 20"> 20</span>
                                                <span *ngIf="productArraySize === 30">30</span>
                                                <span *ngIf="productArraySize === 40">40</span>

                                            </button>
                                        </div>
                                        <div class="col"
                                            style="text-align: right;">
                                            <button class="btn btn-light border"
                                                type="button"
                                                (click)="sort_by_product('product_id')">ID
                                                <span
                                                    *ngIf="PRODUCT_SORT===true && CHOSEN_PROPERTY === 'product_id' "><i
                                                        class="fas fa-caret-down"></i></span>
                                                <span
                                                    *ngIf="PRODUCT_SORT===false && CHOSEN_PROPERTY === 'product_id' "><i
                                                        class="fas fa-caret-up"></i></span>
                                                <span *ngIf="CHOSEN_PROPERTY !== 'product_id' "><i
                                                        class="fas fa-sort"></i></span>
                                            </button>
                                            <button class="btn btn-light border"
                                                type="button"
                                                (click)="sort_by_product('product_bought')">Purchase
                                                <span
                                                    *ngIf="PRODUCT_SORT===true && CHOSEN_PROPERTY === 'product_bought' "><i
                                                        class="fas fa-caret-down"></i></span>
                                                <span
                                                    *ngIf="PRODUCT_SORT===false && CHOSEN_PROPERTY === 'product_bought' "><i
                                                        class="fas fa-caret-up"></i></span>
                                                <span *ngIf="CHOSEN_PROPERTY !== 'product_bought' "><i
                                                        class="fas fa-sort"></i></span>
                                            </button>
                                            <button class="btn btn-light border"
                                                type="button"
                                                (click)="sort_by_product('product_stock')">Stock
                                                <span
                                                    *ngIf="PRODUCT_SORT===true && CHOSEN_PROPERTY === 'product_stock' "><i
                                                        class="fas fa-caret-down"></i></span>
                                                <span
                                                    *ngIf="PRODUCT_SORT===false && CHOSEN_PROPERTY === 'product_stock' "><i
                                                        class="fas fa-caret-up"></i></span>
                                                <span *ngIf="CHOSEN_PROPERTY !== 'product_stock' "><i
                                                        class="fas fa-sort"></i></span>
                                            </button>
                                            <button class="btn btn-light border"
                                                type="button"
                                                (click)="sort_by_product('product_updated_at')">Update time
                                                <span
                                                    *ngIf="PRODUCT_SORT===true && CHOSEN_PROPERTY === 'product_updated_at' "><i
                                                        class="fas fa-caret-down"></i></span>
                                                <span
                                                    *ngIf="PRODUCT_SORT===false && CHOSEN_PROPERTY === 'product_updated_at' "><i
                                                        class="fas fa-caret-up"></i></span>
                                                <span *ngIf="CHOSEN_PROPERTY !== 'product_updated_at' "><i
                                                        class="fas fa-sort"></i></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <!-- /.card-header col-sm-2-->
                                <div class="card-body overflow-auto">
                                    <div class="row">
                                        <div [ngClass]="productSize()"
                                            *ngFor="let i of allproduct.slice(0,productArraySize) | filter:searchProduct"
                                            (click)="chooseProduct(i)">
                                            <a data-toggle="tab"
                                                [attr.href]="'#nav-home'+ t"
                                                style="color:black">
                                                <div class="card mycard">
                                                    <div class="container ">
                                                        <div class="row ">
                                                            <div class="col"
                                                                style="max-width: 200px;max-height: 100px;justify-content: center; display: flex; overflow: hidden; ">
                                                                <img class="card-img"
                                                                    style="max-height: 100px; width: auto;"
                                                                    [ngStyle]="imageSize()"
                                                                    src="https://picsum.photos/200/100"
                                                                    alt="Card image" />
                                                            </div>
                                                        </div>
                                                        <div class="row"
                                                            aria-rowspan="2">
                                                            <div class="col">
                                                                <a><b>${{i.product_price}}</b>
                                                                    <small class="float-right"
                                                                        style="color:red;">{{i.product_stock}}
                                                                        left</small></a>
                                                            </div>
                                                        </div>
                                                        <div class="row"
                                                            aria-rowspan="2">
                                                            <div class="col textover">
                                                                <small>{{i.product_name}} lorem ipsum diasda lorem
                                                                    ipsum</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <!-- /.card-body -->
                            </div>


                        </div>
                        <!-- <div class="col-sm-9" >
                
                
            </div> -->
                        <div class="col-sm-3 p-0 m-0">
                            <div class="card bg-white m-0 p-0  overflow-auto h-100">
                                <!-- /.card-header -->
                                <div class="card-header bg-light">
                                    <h3 style="text-align: center;"><b>Order #{{t}}</b></h3>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <button class="btn btn-white">Customer</button>
                                        </div>
                                        <div class="col"
                                            aria-colspan="2">
                                            <div class="input-group mb-3">
                                                <select class="custom-select"
                                                    [(ngModel)]="u"
                                                    name="targetuser"
                                                    (change)="change(u);">
                                                    <option *ngFor="let u of alluser"
                                                        [ngValue]="u">{{u.user_name}}</option>
                                                </select>
                                                <div class="input-group-append">
                                                    <button type="button"
                                                        class="input-group-text bg-light"
                                                        data-toggle="modal"
                                                        data-target=".bd-example-modal-lg">
                                                        <i class="fas fa-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col">
                                            <button class="btn btn-white">Ship option</button>
                                        </div>
                                        <div class="col"
                                            aria-colspan="2">
                                            <div class="input-group mb-1 ">
                                                <select class="custom-select"
                                                    id="select"
                                                    [(ngModel)]="shipOptionModel"
                                                    name="shipOption"
                                                    (change)="shipOptionAlert(shipOptionModel);">
                                                    <option value="Delivery">Delivery</option>
                                                    <option value="Pickup at store">Pickup at store</option>
                                                </select>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col">
                                            <button class="btn btn-white">Subtotal</button>
                                        </div>
                                        <div class="col"
                                            aria-colspan="2">
                                            <h1>
                                                <input style=" text-align: right;"
                                                    type="number"
                                                    class="form-control orderinput"
                                                    placeholder="{{to | number:  '1.2-2'}}"
                                                    aria-describedby="basic-addon1"
                                                    readonly>
                                            </h1>
                                        </div>
                                    </div>



                                    <div class="row">
                                        <div class="col"
                                            aria-colspan="2">
                                            <button class="btn btn-white">Discount
                                            </button>
                                            <button *ngIf='discountType === false'
                                                class="btn btn-light"
                                                (click)='setDiscountType();blur_discount_tax()'>
                                                <i class="fas fa-percentage"></i>
                                            </button>
                                            <button *ngIf='discountType === true'
                                                class="btn btn-light"
                                                (click)='setDiscountType();blur_discount_tax()'>
                                                <i class="fas fa-dollar-sign"></i>
                                            </button>
                                            <small *ngIf='discountType === false'>
                                                ({{discount | number:  '1.2-2'}}%)
                                            </small>
                                            <small *ngIf='discountType === true'></small>
                                        </div>
                                        <div class="col">
                                            <button class="btn p-0 m-0"
                                                id="dropdownDiscount"
                                                data-toggle="dropdown"
                                                aria-haspopup="true"
                                                aria-expanded="false">
                                                <input *ngIf='discountType === false'
                                                    style=" text-align: right;"
                                                    type="number"
                                                    class="form-control orderinput"
                                                    placeholder="-{{ to * discount /100 | number:  '1.2-2'}}"
                                                    aria-describedby="basic-addon1"
                                                    readonly>
                                                <input *ngIf='discountType === true'
                                                    style=" text-align: right;"
                                                    type="number"
                                                    class="form-control orderinput"
                                                    placeholder="-{{discount | number:  '1.2-2'}}"
                                                    aria-describedby="basic-addon1"
                                                    readonly>

                                            </button>
                                            <div class="dropdown-menu"
                                                aria-labelledby="dropdownDiscount">
                                                <div class="dropdown-item m-0 p-0">
                                                    <input [(ngModel)]="discount"
                                                        style=" text-align: right;"
                                                        type="number"
                                                        class="form-control orderinputsmall"
                                                        placeholder="$"
                                                        aria-describedby="basic-addon1"
                                                        (blur)="blur_discount_tax()"
                                                        (focus)="blur_discount_tax()">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row"
                                        aria-rowspan="3">
                                        <div class="col">
                                            <button class="btn btn-white">Tax
                                            </button>
                                            <small>({{taxModel}}%)</small>
                                        </div>
                                        <div class="col">

                                            <button class="btn p-0 m-0"
                                                id="dropdownTax"
                                                data-toggle="dropdown"
                                                aria-haspopup="true"
                                                aria-expanded="false">
                                                <input *ngIf='discountType === false && to !== undefined'
                                                    style=" text-align: right;"
                                                    type="number"
                                                    class="form-control orderinput"
                                                    placeholder="{{(to - to * discount /100)* taxModel/100 | number:  '1.2-2'}}"
                                                    aria-describedby="basic-addon1"
                                                    readonly>

                                                <input *ngIf='discountType === true && to !== undefined'
                                                    style=" text-align: right;"
                                                    type="number"
                                                    class="form-control orderinput"
                                                    placeholder="{{to*taxModel/100 - discount*taxModel/100 | number:  '1.2-2'}}"
                                                    aria-describedby="basic-addon1"
                                                    readonly>
                                                <input *ngIf='to === undefined'
                                                    style=" text-align: right;"
                                                    type="number"
                                                    class="form-control orderinput"
                                                    aria-describedby="basic-addon1"
                                                    readonly>
                                            </button>

                                            <div class="dropdown-menu"
                                                aria-labelledby="dropdownDiscount">
                                                <div class="dropdown-item p-0 m-0">
                                                    <input [(ngModel)]="taxModel"
                                                        style="text-align: right;"
                                                        type="number"
                                                        class="form-control orderinputsmall"
                                                        aria-describedby="basic-addon1"
                                                        (blur)="blur_discount_tax()"
                                                        (focus)="blur_discount_tax()">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row"
                                        *ngIf="shipOptionModel === 'Delivery' ">
                                        <div class="col"
                                            aria-colspan="2">
                                            <button class="btn btn-white">Ship fee</button>
                                        </div>

                                        <div class="col">
                                            <div class="input-group mb-1 ">
                                                <input style=" text-align: right;"
                                                    type="number"
                                                    class="form-control orderinput"
                                                    [(ngModel)]="shipFeeModel"
                                                    name="shipFee"
                                                    (blur)="blur_discount_tax()"
                                                    (focus)="blur_discount_tax()">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mt-5">
                                        <div class="col"
                                            aria-colspan="2">
                                            <button class="btn btn-white"><b>Total </b></button>
                                        </div>
                                        <div class="col">
                                            <h1 *ngIf="tabtotal.length !== 0">
                                                <span class="float-right">
                                                    <div>
                                                        ${{sub | number:  '1.2-2'}}
                                                    </div>
                                                </span></h1>
                                        </div>
                                    </div>

                                    <div class="row"
                                        *ngIf="to !== 0 && to !== undefined">
                                        <div class="col"
                                            aria-colspan="2">
                                            <button class="btn btn-white">Customer pay</button>
                                            <button class="btn btn-light"
                                                data-toggle="modal"
                                                data-target="#paymentOptionModal">
                                                <i class="far fa-credit-card"></i>
                                            </button>
                                        </div>

                                        <div class="col">
                                            <h2 *ngFor="let i of tabPaymentlist">
                                                <span *ngIf="i.tab_id === t">
                                                    <input *ngIf="(i.tab_bank === 0 && i.tab_card === 0)"
                                                        [(ngModel)]="cashModel"
                                                        style=" text-align: right;"
                                                        type="number"
                                                        class="form-control orderinput"
                                                        aria-describedby="basic-addon1"
                                                        (blur)="blur_discount_tax()"
                                                        (focus)="blur_discount_tax()">

                                                    <input
                                                        *ngIf="(i.tab_bank === 0 && i.tab_cash === 0 && i.tab_card > 0)"
                                                        [(ngModel)]="cardModel"
                                                        style=" text-align: right;"
                                                        type="number"
                                                        class="form-control orderinput"
                                                        aria-describedby="basic-addon1"
                                                        (blur)="blur_discount_tax()"
                                                        (focus)="blur_discount_tax()">

                                                    <input
                                                        *ngIf="(i.tab_cash === 0 && i.tab_card === 0 && i.tab_bank > 0)"
                                                        [(ngModel)]="bankModel"
                                                        style=" text-align: right;"
                                                        type="number"
                                                        class="form-control orderinput"
                                                        aria-describedby="basic-addon1"
                                                        (blur)="blur_discount_tax()"
                                                        (focus)="blur_discount_tax()">

                                                    <input *ngIf="(i.tab_cash > 0 && i.tab_card > 0) ||
                                                    (i.tab_cash > 0 && i.tab_bank > 0) ||
                                                    (i.tab_bank > 0 && i.tab_card > 0) "
                                                        [(ngModel)]="paymentTotal"
                                                        style=" text-align: right;"
                                                        type="number"
                                                        class="form-control orderinput"
                                                        aria-describedby="basic-addon1"
                                                        (blur)="blur_discount_tax()"
                                                        (focus)="blur_discount_tax()"
                                                        readonly>
                                                </span>
                                            </h2>
                                            <h3 *ngFor="let i of tabPaymentlist"
                                                style=" text-align: right;">
                                                <span
                                                    *ngIf="(i.tab_id === t && i.tab_card === 0 && i.tab_bank === 0) || (i.tab_id === t && i.tab_cash > 0)"
                                                    class="badge badge-pill badge-light">Cash</span>
                                                <span *ngIf="i.tab_id === t && i.tab_card > 0"
                                                    class="badge badge-pill badge-light">Card</span>
                                                <span *ngIf="i.tab_id === t && i.tab_bank > 0"
                                                    class="badge badge-pill badge-light">Bank</span>
                                            </h3>
                                        </div>
                                    </div>

                                    <div class="modal fade"
                                        id="paymentOptionModal"
                                        tabindex="-1"
                                        role="dialog"
                                        aria-labelledby="paymentOptionModalLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog"
                                            role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h1 class="modal-title"
                                                        id="paymentOptionModalLabel">Payment option</h1>
                                                    <button type="button"
                                                        class="close"
                                                        data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <table *ngFor="let i of tabPaymentlist"
                                                        class="table table-borderless m-0 p-0">
                                                        <tbody *ngIf="i.tab_id === t">
                                                            <tr>
                                                                <td>Cash</td>
                                                                <td><input [(ngModel)]="cashModel"
                                                                        type="number"
                                                                        style=" text-align: right;"
                                                                        #tabCashInput
                                                                        class="form-control orderinput"
                                                                        placeholder="{{i.tab_cash}}"
                                                                        (blur)="blur_discount_tax()"
                                                                        (focus)="blur_discount_tax()">
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>Credit card</td>
                                                                <td><input [(ngModel)]="cardModel"
                                                                        type="number"
                                                                        style=" text-align: right;"
                                                                        #tabCardInput
                                                                        class="form-control orderinput"
                                                                        placeholder="{{i.tab_card}}"
                                                                        (blur)="blur_discount_tax()"
                                                                        (focus)="blur_discount_tax()">
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>Bank transfer</td>
                                                                <td><input [(ngModel)]="bankModel"
                                                                        type="number"
                                                                        style=" text-align: right;"
                                                                        #tabBankInput
                                                                        class="form-control orderinput"
                                                                        placeholder="{{i.tab_bank}}"
                                                                        (blur)="blur_discount_tax()"
                                                                        (focus)="blur_discount_tax()">
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>Total</td>
                                                                <td>
                                                                    <input [(ngModel)]="paymentTotal"
                                                                        type="number"
                                                                        style=" text-align: right"
                                                                        #tabBankInput
                                                                        class="form-control orderinput"
                                                                        placeholder='{{paymentTotal}}'
                                                                        readonly>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td></td>
                                                                <td style=" text-align: right;">
                                                                    <button type="button"
                                                                        class="btn btn-primary m-2"
                                                                        (click)="savePayment(t,tabCashInput.value,tabCardInput.value,tabBankInput.value);blur_discount_tax()">Save
                                                                        changes
                                                                    </button>

                                                                    <button type="button"
                                                                        class="btn btn-secondary"
                                                                        data-dismiss="modal">Close
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row"
                                        *ngIf="to !== 0 && to !== undefined">
                                        <div class="col">
                                            <button class="btn btn-white">Change</button>
                                        </div>
                                        <div class="col"></div>
                                        <div class="col">
                                            <h1>
                                                <input [(ngModel)]="changeModel"
                                                    style=" text-align: right; border:none"
                                                    type="number"
                                                    class="form-control orderinput"
                                                    aria-describedby="basic-addon1"
                                                    readonly>
                                            </h1>
                                        </div>
                                    </div>



                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="exampleFormControlTextarea1"><button
                                                        class="btn btn-white">Addiditional info</button></label>
                                                <textarea [(ngModel)]="infoModel"
                                                    class="form-control"
                                                    id="exampleFormControlTextarea1"
                                                    rows="3"></textarea>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="row">
                                        <button class="btn btn-success btn-block"
                                            (click)="payandprint()">
                                            <i class="far fa-credit-card"></i>
                                            Pay and print</button>
                                    </div>


                                </div>
                                <!-- /.card-body -->

                            </div>
                        </div>
                    </div>

                </div>
            </section>
            <!-- Main content -->

            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->


        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Control sidebar content goes here -->
        </aside>
        <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->

</body>

</html>